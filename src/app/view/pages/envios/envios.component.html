<div class="envios container">
    <h2 class="title text-center my-4">Busca el historial de tus pedidos</h2>
    <form class="mt-5" >
        <div class="form-outline mb-4 w-50 mx-auto">
            <label class="form-label" for="dni">Ingresa tu DNI:</label>
            <div class="d-flex">
                <input 
                    type="text" 
                    id="dni" 
                    name="dni" 
                    [(ngModel)]="dni"
                    class="inputDni form-control form-control-sm me-2" 
                    placeholder="Ingresa el DNI" 
                    required />
                <button  (click)="buscarinformacionCliente()" class="btn btn-enviar">Enviar</button>
            </div>
        </div>
    </form>
    
    <!-- Result Section -->
    <div *ngIf="clienteInfo" class="mt-5">
        <h3 class="text-center">Información del Cliente</h3>
        <div class="cliente-info card mb-4 p-3">
            <table class="table table-bordered">
                <tbody>
                    <tr>
                        <th>DNI</th>
                        <td>{{ clienteInfo.ClienteDni }}</td>
                    </tr>
                    <tr>
                        <th>Nombre</th>
                        <td>{{ clienteInfo.ClienteNombre }}</td>
                    </tr>
                    <tr>
                        <th>Apellidos</th>
                        <td>{{ clienteInfo.ClienteApellidos }}</td>
                    </tr>
                    <tr>
                        <th>Dirección</th>
                        <td>{{ clienteInfo.ClienteDireccion }}</td>
                    </tr>
                    <tr>
                        <th>Teléfono</th>
                        <td>{{ clienteInfo.ClienteTelefono }}</td>
                    </tr>
                    <tr>
                        <th>Email</th>
                        <td>{{ clienteInfo.ClienteEmail }}</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div *ngFor="let pedido of clienteInfo.Pedidos" class="pedido card mb-4 p-3">
            <h4 class="text-center">Pedido #{{ pedido.PedidoCodigo }}</h4>
            <table class="table table-bordered">
                <tbody>
                    <tr>
                        <th>Fecha</th>
                        <td>{{ pedido.Pedidofecha | date:'medium' }}</td>
                    </tr>
                    <tr>
                        <th>Total</th>
                        <td>{{ pedido.Pedidototal | currency }}</td>
                    </tr>
                    <tr>
                        <th>Estado</th>
                        <td>{{ pedido.PedidoEstado }}</td>
                    </tr>
                </tbody>
            </table>
            
            <h5 class="mt-3">Detalles del Pedido</h5>
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>Producto</th>
                        <th>Descripción</th>
                        <th>Cantidad</th>
                        <th>Subtotal</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let detalle of pedido.Detalles">
                        <td>{{ detalle.ProductoNombre }}</td>
                        <td>{{ detalle.ProductoDescripcion }}</td>
                        <td>{{ detalle.DetallePedidoCantidad }}</td>
                        <td>{{ detalle.DetallePedidoSubtotal | currency }}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
